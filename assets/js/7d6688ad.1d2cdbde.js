"use strict";(self.webpackChunkcot_docs=self.webpackChunkcot_docs||[]).push([[29],{1162:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/reqentity1-d875e1f32ac2e0a8f78a89cd93d98850.png"},3010:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/configexample-4f599fabafd537e0106a1bd36b9d0481.png"},5521:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/qbdto1-7a0b0275ec8a2cfcb2230d49fda9fb61.png"},5593:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/webhooks_sample-9b32c2868633175fb0a7c103806d827c.png"},7611:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"extras/qb-integration","title":"Quickbase Integration","description":"Notice we are still using my user token for this. If for some reason they decide to delete my qb account, this token might not work anymore.","source":"@site/docs/extras/qb-integration.md","sourceDirName":"extras","slug":"/extras/qb-integration","permalink":"/cot-documentation/docs/extras/qb-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/extras/qb-integration.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Extras","permalink":"/cot-documentation/docs/category/extras"}}');var s=t(4848),o=t(8453);const a={},l="Quickbase Integration",r={},d=[{value:"Overview",id:"overview",level:2},{value:"Get latest data from Quickbase",id:"get-latest-data-from-quickbase",level:2},{value:"1. Delete all records from requisitions table",id:"1-delete-all-records-from-requisitions-table",level:3},{value:"2. Run manual sync",id:"2-run-manual-sync",level:3},{value:"Automated Data Sync via Webhooks",id:"automated-data-sync-via-webhooks",level:2},{value:"1. Install localtunnel",id:"1-install-localtunnel",level:3},{value:"2. Run localtunnel",id:"2-run-localtunnel",level:3},{value:"3. Access api from localtunnel",id:"3-access-api-from-localtunnel",level:3},{value:"4. Update Quickbooks Webhooks settings",id:"4-update-quickbooks-webhooks-settings",level:3},{value:"4.1 Login to Quickbooks",id:"41-login-to-quickbooks",level:4},{value:"4.2 Update Webhooks settings for <code>New Staff Requisition</code>",id:"42-update-webhooks-settings-for-new-staff-requisition",level:4},{value:"4.3 Update Webhooks settings for <code>Job Bank (AKA Job Details)</code>",id:"43-update-webhooks-settings-for-job-bank-aka-job-details",level:4},{value:"4.4 Testing Webhooks",id:"44-testing-webhooks",level:4},{value:"Syncing a New Field to the Requisitions Table",id:"syncing-a-new-field-to-the-requisitions-table",level:2},{value:"1. Navigate to fields page",id:"1-navigate-to-fields-page",level:3},{value:"2. Update Requisition Mapping",id:"2-update-requisition-mapping",level:3},{value:"3. Add a new column on Requisitions table",id:"3-add-a-new-column-on-requisitions-table",level:3},{value:"4. Run manual sync",id:"4-run-manual-sync",level:3},{value:"Conclusion",id:"conclusion",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"quickbase-integration",children:"Quickbase Integration"})}),"\n",(0,s.jsxs)(n.admonition,{type:"danger",children:[(0,s.jsx)(n.p,{children:"Notice we are still using my user token for this. If for some reason they decide to delete my qb account, this token might not work anymore."}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Alt Text",src:t(3010).A+"",width:"757",height:"439"})}),(0,s.jsx)(n.p,{children:"Kindly request a new account to be created for accessing the dev test and just create a new user token."})]}),"\n",(0,s.jsxs)(n.admonition,{type:"warning",children:[(0,s.jsx)(n.p,{children:"If our server experiences downtime, we need to manually run the following command:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"npm run cli:run -- command=populate-requisitions-from-qb\n"})}),(0,s.jsx)(n.p,{children:"This is necessary because the webhooks will be down during the downtime and won\u2019t keep the data synchronized."})]}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"In this section, we\u2019ll document the integration of Quickbase with COT. We\u2019ll explore how to sync the development instance of Quickbase with the local environment. Additionally, we\u2019ll use LocalTunnel to test Quickbase webhooks. We will also see how we can add new fields to sync."}),"\n",(0,s.jsx)(n.h2,{id:"get-latest-data-from-quickbase",children:"Get latest data from Quickbase"}),"\n",(0,s.jsx)(n.h3,{id:"1-delete-all-records-from-requisitions-table",children:"1. Delete all records from requisitions table"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# Access mysql from our docker instance\r\nmysql -u root -padmin -P3307\r\n\r\n#Delete manually\r\nuse recruitment;\r\ndelete from requisitions;\n"})}),"\n",(0,s.jsxs)(n.admonition,{type:"danger",children:[(0,s.jsx)(n.p,{children:"Please never delete requisition records on production."}),(0,s.jsx)(n.p,{children:"We are deleting records from the requisitions table because it was initially populated with hardcoded data. This ensures that the old data doesn\u2019t appear when we sync the records with Quickbase."})]}),"\n",(0,s.jsx)(n.h3,{id:"2-run-manual-sync",children:"2. Run manual sync"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# Access the Container's CLI\r\ndocker exec -it nestjs-dev sh\r\n\r\n# Run the Manual Sync Command\r\nnpm run cli:run -- command=populate-requisitions-from-qb\n"})}),"\n",(0,s.jsx)(n.h2,{id:"automated-data-sync-via-webhooks",children:"Automated Data Sync via Webhooks"}),"\n",(0,s.jsx)(n.h3,{id:"1-install-localtunnel",children:"1. Install localtunnel"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"npm install -g localtunnel\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-run-localtunnel",children:"2. Run localtunnel"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# The port here is the current port our api is running on\r\nlt --port 3000\r\n\r\n# It will log what url we can access our api\r\nyour url is: https://khaki-dryers-sin.loca.lt\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-access-api-from-localtunnel",children:"3. Access api from localtunnel"}),"\n",(0,s.jsx)(n.p,{children:"We can now try accessing it from our browser first before updating the webhooks settings on Quickbase."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# We will access it like this. Notice we append `/api` here\r\nhttps://khaki-dryers-sin.loca.lt/api\n"})}),"\n",(0,s.jsxs)(n.admonition,{type:"warning",children:[(0,s.jsx)(n.p,{children:"Page will show a prompt first where you have to enter a tunnel password first. Please read how to get the password"}),(0,s.jsx)(n.p,{children:"Usually you can get the password here"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"https://loca.lt/mytunnelpassword\n"})})]}),"\n",(0,s.jsx)(n.h3,{id:"4-update-quickbooks-webhooks-settings",children:"4. Update Quickbooks Webhooks settings"}),"\n",(0,s.jsx)(n.p,{children:"Now that we have our local api exposed to the internet, we can use the url provided by localtunnel to Quickbooks"}),"\n",(0,s.jsx)(n.h4,{id:"41-login-to-quickbooks",children:"4.1 Login to Quickbooks"}),"\n",(0,s.jsxs)(n.p,{children:["Go to this url ",(0,s.jsx)(n.a,{href:"https://rrhodes.quickbase.com/",children:"https://rrhodes.quickbase.com/"})," and login"]}),"\n",(0,s.jsxs)(n.p,{children:["Navigate or click ",(0,s.jsx)(n.code,{children:"Copy of C-HRIS-P v2 - DEV"})," or simply just use this link ",(0,s.jsx)(n.a,{href:"https://rrhodes.quickbase.com/nav/app/buqn5hxea/action/appoverview",children:"https://rrhodes.quickbase.com/nav/app/buqn5hxea/action/appoverview"})]}),"\n",(0,s.jsxs)(n.h4,{id:"42-update-webhooks-settings-for-new-staff-requisition",children:["4.2 Update Webhooks settings for ",(0,s.jsx)(n.code,{children:"New Staff Requisition"})]}),"\n",(0,s.jsxs)(n.p,{children:["Now we just need to navigate to ",(0,s.jsx)(n.code,{children:"New Staff Requisition > Settings > Webhooks"})," (Just try to figure out how to navigate this settings should be very straightforward) or Simply just access this link ",(0,s.jsx)(n.a,{href:"https://rrhodes.quickbase.com/nav/app/buqn5hxea/table/buqn5hxeu/action/WebhookList",children:"https://rrhodes.quickbase.com/nav/app/buqn5hxea/table/buqn5hxeu/action/WebhookList"})]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Notice we have 2 webhooks settings here. For when a requisition is created or updated."})}),"\n",(0,s.jsx)(n.p,{children:"Update those settings and use the url provided by localtunnel"}),"\n",(0,s.jsx)(n.p,{children:"It should look something like this:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Alt Text",src:t(5593).A+"",width:"1117",height:"1002"})}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsx)(n.p,{children:"Notice how to changed the Endpoint URL and used the url provided by localtunnel"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"[Url Provided by localtunnel]/api/webhooks/quickbase/requisitions\n"})})]}),"\n",(0,s.jsxs)(n.h4,{id:"43-update-webhooks-settings-for-job-bank-aka-job-details",children:["4.3 Update Webhooks settings for ",(0,s.jsx)(n.code,{children:"Job Bank (AKA Job Details)"})]}),"\n",(0,s.jsx)(n.p,{children:"Since New Staff Requisition is related to Job Bank. We also need to update webhook settings for this."}),"\n",(0,s.jsxs)(n.p,{children:["Jujst navigate to ",(0,s.jsx)(n.code,{children:"Job Bank > Settings > Webhooks"})," (Just try to figure out how to navigate this settings should be very straightforward) or Simply just access this link ",(0,s.jsx)(n.a,{href:"https://rrhodes.quickbase.com/nav/app/buqn5hxea/table/buqn5hxes/action/WebhookList",children:"https://rrhodes.quickbase.com/nav/app/buqn5hxea/table/buqn5hxes/action/WebhookList"})]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"We only have 1 webhook settings for this. Just do the same steps we did on New Staff Requisition"})}),"\n",(0,s.jsx)(n.h4,{id:"44-testing-webhooks",children:"4.4 Testing Webhooks"}),"\n",(0,s.jsxs)(n.p,{children:["Now that the webhooks are configured, simply create or edit a requisition from the ",(0,s.jsx)(n.code,{children:"New Staff Requisition"})," page or edit the ",(0,s.jsx)(n.code,{children:"Job Bank"}),". After doing so, check your local environment, and the data should automatically update there as well."]}),"\n",(0,s.jsx)(n.h2,{id:"syncing-a-new-field-to-the-requisitions-table",children:"Syncing a New Field to the Requisitions Table"}),"\n",(0,s.jsx)(n.h3,{id:"1-navigate-to-fields-page",children:"1. Navigate to fields page"}),"\n",(0,s.jsxs)(n.p,{children:["First we need to navigate to the fields page of New Staff Requisition.\r\nNavigate to ",(0,s.jsx)(n.code,{children:"New Staff Requisition > settings > fields"})," or simply access this link ",(0,s.jsx)(n.a,{href:"https://rrhodes.quickbase.com/nav/app/buqn5hxea/table/buqn5hxeu/action/listfields",children:"https://rrhodes.quickbase.com/nav/app/buqn5hxea/table/buqn5hxeu/action/listfields"})]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"You should see here all the fields we can sync to our requisitions table. Also notice fields from the Job Details are showing, we can sync that as well."})}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["Please do take note of the ",(0,s.jsx)(n.code,{children:"Field ID"})," because that's what we are going to use for mapping"]})}),"\n",(0,s.jsx)(n.h3,{id:"2-update-requisition-mapping",children:"2. Update Requisition Mapping"}),"\n",(0,s.jsxs)(n.p,{children:["In our codebase just edit this ",(0,s.jsx)(n.code,{children:"QbRequisition.dto.ts"})," and add the field you want to add to the ",(0,s.jsx)(n.code,{children:"QbNewRequisitionMapping"})," Variable."]}),"\n",(0,s.jsxs)(n.p,{children:["Should look something like this (For instance we want to add ",(0,s.jsx)(n.code,{children:"Job Family"}),"):"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Alt Text",src:t(5521).A+"",width:"895",height:"857"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Notice how the value is 99. This is because that's the field ID of Job Family"})}),"\n",(0,s.jsx)(n.h3,{id:"3-add-a-new-column-on-requisitions-table",children:"3. Add a new column on Requisitions table"}),"\n",(0,s.jsx)(n.p,{children:"Just add the column using our Model First Migration in typeorm"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Alt Text",src:t(1162).A+"",width:"721",height:"484"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Now just simply generate the migration and run it"})}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["It's very very important that the column name and the name of mapping are exactly the same. Otherwise, it won't populate. Notice how we used ",(0,s.jsx)(n.code,{children:"jobFamily"})," for both"]})}),"\n",(0,s.jsx)(n.h3,{id:"4-run-manual-sync",children:"4. Run manual sync"}),"\n",(0,s.jsx)(n.p,{children:"Now that we have everything setup for the new field just simply run this command to populate the new field we've added."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"npm run cli:run -- command=populate-requisitions-from-qb\n"})}),"\n",(0,s.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,s.jsx)(n.p,{children:"We have set up the integration of Quickbase with COT, enabling seamless syncing of the Quickbase development instance with the local environment. By using LocalTunnel, we can efficiently test Quickbase webhooks. Additionally, we've covered how to add new fields for synchronization, ensuring that all necessary data is kept up to date across systems."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>l});var i=t(6540);const s={},o=i.createContext(s);function a(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);